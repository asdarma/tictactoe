<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground to try TicTacToe's IIFEs</title>
</head>
<body>
    <script>
/* PSEUDOCODE

1. play()() : only method - move()
    - reset()
    - showBoard()
2. move(num) 
    - checkWin()
    - checkDraw()
    - switchplayer()
3. once Win or Draw
    - reset()
*/

const tictactoe = (function(){

    let board = ["1", "2", "3", "4", "5", "6", "7", "8", "9"];
    let currentPlayer = "X";

    function showBoard() {
            console.log(`
${board[0]}  |  ${board[1]}  |  ${board[2]}

${board[3]}  |  ${board[4]}  |  ${board[5]}

${board[6]}  |  ${board[7]}  |  ${board[8]}
            `)
        }

        function move(num) {
        if ( num < 0 || num > 8 ||
            board[num] === 'X' ||
            board[num] === 'O'
        ) {
            console.log('Invalid move!')
            return;
        }
        board[num] = currentPlayer;
        }

        const winPattern = [
        [0,1,2], [3,4,5], [6,7,8],
        [0,3,6], [1,4,7], [2,5,8],
        [0,4,8], [2,4,6]
        ];

        function checkWin() {
        for (const pattern of winPattern) {
            const [a, b, c] = pattern;
        if (board[a] === board[b] &&
            board [b] === board[c]) {
            console.log(`${currentPlayer} is the winner`)
        } else {
            null
            reset()
        }
        }}

        function checkDraw() {
        if (board.every(b => b === 'X' || b === 'O')) {
            console.log('Its a draw!')
            return
        } else {
            null
            reset()
        }
        }

        function switchPlayer() {
        currentPlayer = (currentPlayer === "X") ? "O" : "X"
        }

        function reset() {
        board = ["1", "2", "3", "4", "5", "6", "7", "8", "9"];
        currentPlayer = "X";
        }

    reset()
    showBoard();

    return {
        move,
        reset
    }
})();




    </script>
    
</body>
</html>